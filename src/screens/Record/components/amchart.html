<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Amchart 5 POC</title>
		<script src="https://cdn.amcharts.com/lib/5/index.js"></script>
		<script src="https://cdn.amcharts.com/lib/5/percent.js"></script>

		<style>
			#pie-chart-div {
				width: 100%;
				height: 100vh;
			}
		</style>
	</head>

	<body>
		<div id="pie-chart-div"></div>
		<script>
			const pieChartRoot = am5.Root.new('pie-chart-div');

			const pieChart = pieChartRoot.container.children.push(
				am5percent.PieChart.new(pieChartRoot, {}),
			);

			const series = pieChart.series.push(
				am5percent.PieSeries.new(pieChartRoot, {
					name: 'Impressions share by device',
					categoryField: 'name',
					valueField: 'population',

					legendLabelText: '{category}',
					legendValueText: '{value}',
				}),
			);

			series.slices.template.setAll({
				templateField: 'sliceSettings',
			});

			const data = JSON.parse(
				JSON.stringify([
					{
						name: 'Seoul',
						population: 21500000,
						color: 'rgba(131, 167, 234, 1)',
						legendFontColor: '#7F7F7F',
						legendFontSize: 15,
					},
					{
						name: 'Toronto',
						population: 2800000,
						color: '#F00',
						legendFontColor: '#7F7F7F',
						legendFontSize: 15,
					},
					{
						name: 'Beijing',
						population: 527612,
						color: 'red',
						legendFontColor: '#7F7F7F',
						legendFontSize: 15,
					},
					{
						name: 'Moscow',
						population: 11920000,
						color: 'rgb(0, 0, 255)',
						legendFontColor: '#7F7F7F',
						legendFontSize: 15,
					},
				]),
			);

			series.data.setAll(data);
			series.labels.template.set('forceHidden', true);
			series.ticks.template.set('forceHidden', true);

			// Add legend
			var legend = pieChart.children.push(
				am5.Legend.new(pieChartRoot, {
					centerY: am5.percent(50),
					y: am5.percent(50),
					layout: pieChartRoot.verticalLayout,
				}),
			);

			legend.data.setAll(series.dataItems);
		</script>
	</body>
</html>
